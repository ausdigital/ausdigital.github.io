<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>AusDigital Digital Capability Publisher (DCP) 2.0 Specification - AusDigital Standards by ausdigital</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/style.css">

    <link rel="apple-touch-icon" sizes="57x57" href="/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/images/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
</head>

<body>

<header class="header">
    <div class="header-line">
        <div class="wrapper">
            <div id="mobile-menu-wrapper" class="mobile-menu">
                <button id="hamburger-menu" class="hamburger-menu">
                    <span>toggle menu</span>
                </button>
                <div id="mobile-menu" style="display: none;">
                    
                    <ul class="sidebar-menu">
    
    <li class="menu-title">Benefits</li>
    <li><a  href="/business-case/">A Business Case</a></li>
    <li class="menu-title">Technical Specs</li>
    <li><a  href="/ausdigital-idp/">Identity Provider (IDP)</a></li>
    <li><a  href="/ausdigital-dcl/">Capability Locator (DCL)</a></li>
    <li><a class="active" href="/ausdigital-dcp/">Capability Publisher (DCP)</a></li>
    <li><a  href="/ausdigital-tap/">Access Point (TAP)</a></li>
    <li><a  href="/ausdigital-tap-gw/">TAP Gateway (TAP-GW)</a></li>
    <li><a  href="/ausdigital-nry/">Notary (NRY)</a></li>
    <li><a  href="/ausdigital-syn/">UBL Syntax (SYN)</a></li>
    <li class="menu-title">Semantic Specs</li>
    <li><a  href="/ausdigital-code/">Code Lists Mgmt (CODE)</a></li>
    <li><a  href="/ausdigital-bill/">Billing Process (BILL)</a></li>
    <li><a  href="/ausdigital-po/">Purchase Orders (PO)</a></li>
    <li><a  href="/ausdigital-ship/">Fulfillment (SHIP)</a></li>
    <li class="menu-title">Governance</li>
    <li><a  href="/governance-model/">Governance Model</a></li>
    <li class="menu-title">Community</li>
    <li><a href="http://eepurl.com/ctZ6hf" target="_blank">Newsletter (subscribe)</a></li>
    <li><a href="http://chat.ausdigital.org" target="_blank">Chat (join team)</a></li>
    <li><a href="https://github.com/ausdigital/" target="_blank">GitHub</a></li>
</ul>
                </div>
            </div>
            <a href="/" class="logo"><img src="/images/logo.png" alt="AusDigital"><span>AusDigital.org</span></a>
            <div class="header-search">
                <script>
                    (function() {
                        var cx = '017892665596304004128:tj19kxwel_m';
                        var gcse = document.createElement('script');
                        gcse.type = 'text/javascript';
                        gcse.async = true;
                        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                        var s = document.getElementsByTagName('script')[0];
                        s.parentNode.insertBefore(gcse, s);
                    })();
                </script>
                <gcse:search></gcse:search>
            </div>
            
        </div>
    </div>
    <div class="header-content">
        <div class="wrapper">
            <img src="/images/logo.png" alt="AusDigital">
            <div class="header-text-box">
                <div class="header-name">AusDigital Standards</div>
                <div class="header-tagline">Business to Business data exchange open standards community </div>
            </div>
        </div>
    </div>
</header>
<script type="text/javascript">
    document.getElementById('hamburger-menu').onclick = function() {
        var nf = document.getElementById('mobile-menu');

        // Show and hide menu items when toggle is clicked
        if(nf.style.display==='none') {
            nf.style.display = 'block';
        }
        else {
            nf.style.display = 'none';
        }
    };

    window.addEventListener('click', function(e){
        if (!document.getElementById('mobile-menu-wrapper').contains(e.target)){
            document.getElementById('mobile-menu').style.display= 'none';
        }
    });
</script>

<div class="main-wrapper">
    <div class="main-content">
        <div class="page-sidebar">
            <ul class="sidebar-menu">
    
    <li class="menu-title">Benefits</li>
    <li><a  href="/business-case/">A Business Case</a></li>
    <li class="menu-title">Technical Specs</li>
    <li><a  href="/ausdigital-idp/">Identity Provider (IDP)</a></li>
    <li><a  href="/ausdigital-dcl/">Capability Locator (DCL)</a></li>
    <li><a class="active" href="/ausdigital-dcp/">Capability Publisher (DCP)</a></li>
    <li><a  href="/ausdigital-tap/">Access Point (TAP)</a></li>
    <li><a  href="/ausdigital-tap-gw/">TAP Gateway (TAP-GW)</a></li>
    <li><a  href="/ausdigital-nry/">Notary (NRY)</a></li>
    <li><a  href="/ausdigital-syn/">UBL Syntax (SYN)</a></li>
    <li class="menu-title">Semantic Specs</li>
    <li><a  href="/ausdigital-code/">Code Lists Mgmt (CODE)</a></li>
    <li><a  href="/ausdigital-bill/">Billing Process (BILL)</a></li>
    <li><a  href="/ausdigital-po/">Purchase Orders (PO)</a></li>
    <li><a  href="/ausdigital-ship/">Fulfillment (SHIP)</a></li>
    <li class="menu-title">Governance</li>
    <li><a  href="/governance-model/">Governance Model</a></li>
    <li class="menu-title">Community</li>
    <li><a href="http://eepurl.com/ctZ6hf" target="_blank">Newsletter (subscribe)</a></li>
    <li><a href="http://chat.ausdigital.org" target="_blank">Chat (join team)</a></li>
    <li><a href="https://github.com/ausdigital/" target="_blank">GitHub</a></li>
</ul>
        </div>
        <div class="page-content docs-content">
            <div class="spec-header">
                
                <ul>
                    <li>Spec ID: <p>ausdigital-dcp/1</p>
</li>
                    <li><p><img src="http://rfc.unprotocols.org/spec:2/COSS/raw.svg" alt="raw" /></p>
</li>
                    <li>Editor: <p><a href="mailto:christopher.d.gough@gmail.com">Chris Gough</a></p>
</li>
                    <li>Contributors: <p><a href="mailto:steven.capell@gosource.com.au">Steven Capell</a></p>
</li>
                </ul>
            </div>
            <div class="specs-toc">
    <!--<div class="specs-toc-title">Table of contents</div>-->
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#introduction">Introduction</a></li>
<li class="toc-entry toc-h2"><a href="#goals">Goals</a></li>
<li class="toc-entry toc-h2"><a href="#status">Status</a></li>
<li class="toc-entry toc-h2"><a href="#glossary">Glossary</a></li>
<li class="toc-entry toc-h2"><a href="#licence">Licence</a></li>
<li class="toc-entry toc-h2"><a href="#change-process">Change Process</a></li>
<li class="toc-entry toc-h2"><a href="#language">Language</a></li>
<li class="toc-entry toc-h2"><a href="#application-programming-interface">Application Programming Interface</a></li>
<li class="toc-entry toc-h2"><a href="#protocol">Protocol</a></li>
<li class="toc-entry toc-h2"><a href="#informal-description">Informal description</a></li>
<li class="toc-entry toc-h2"><a href="#formal-rest-api-description">Formal REST API description</a></li>
<li class="toc-entry toc-h3"><a href="#endpoints-description">Endpoints description</a></li>
<li class="toc-entry toc-h2"><a href="#examples">Examples</a></li>
<li class="toc-entry toc-h3"><a href="#response-formats">Response formats</a></li>
<li class="toc-entry toc-h3"><a href="#participant-id-linking">Participant ID linking</a></li>
<li class="toc-entry toc-h1"><a href="#related-material">Related Material</a></li>
</ul>
</div>
            <h2 id="introduction">Introduction</h2>

<p>This document describes a standard service for discovering the integration surface of a
participant in RESTful business-to-business message exchange.</p>

<p>This specification aims to support the Australian Digital Business Council e-Invoicing
initiative, and is under active development at http://ausdigital.org/.</p>

<h2 id="goals">Goals</h2>

<p>The primary goal of the Digital Capability Publisher (DCP) 2.0 Specification is to TBA.</p>

<p>The Digital Capability Publisher (DCP) 2.0 Specification defines TBA.</p>

<h2 id="status">Status</h2>

<p>This spec is an early draft for consuiltation.</p>

<p>This specification aims to support the Australian Digital Business Council
<a href="http://ausdigital.org">eInvoicing initiative</a>, and is under active
development at
<a href="https://github.com/ausdigital/ausdigital-dcp">https://github.com/ausdigital/ausdigital-dcp</a>.</p>

<p>Comments and feedback are encouraged and welcome. Pull requests with improvements are welcome too.</p>

<h2 id="glossary">Glossary</h2>

<table>
  <thead>
    <tr>
      <th>Phrase</th>
      <th>Definition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ausdigital-dcp/2</td>
      <td>This specification (Digital Capability Publisher)</td>
    </tr>
    <tr>
      <td>ausdigital-dcl/2</td>
      <td>Version 2 of the AusDigtial <a href="http://ausdigital.org/specs/ausdigital-dcl/2.0.0">Digital Capability Locator (DCL)</a> specification</td>
    </tr>
    <tr>
      <td>ausdigital-idp/1</td>
      <td>Version 1 of the AusDigital <a href="http://ausdigital.org/specs/ausdigital-idp/1.0">Identity Provider (IDP)</a> specification.</td>
    </tr>
    <tr>
      <td>ausdigital-tap/1</td>
      <td>Version 1 of the AusDigital <a href="http://ausdigital.org/ausdigital-tap">Transaction Access Point(TAP)</a> specification.</td>
    </tr>
    <tr>
      <td>ausdigital-tap/2</td>
      <td>Version 2 of the AusDigital <a href="http://ausdigital.org/ausdigital-tap">Transaction Access Point(TAP)</a> specification.</td>
    </tr>
    <tr>
      <td>ausdigital-nry/1</td>
      <td>Version 1 of the AusDigital <a href="http://ausdigital.org/ausdigital-nry">Notary (NRY)</a> specification.</td>
    </tr>
  </tbody>
</table>

<p>DCP - Digital Capability Publisher</p>

<p>business, business id or participant id - string like <code class="highlighter-rouge">urn:oasis:names:tc:ebcore:partyid-type:iso6523:0151::9999999999</code></p>

<p>The DCP service depends on <code class="highlighter-rouge">ausdigital-dcl/2</code> and <code class="highlighter-rouge">ausdigital-idp/1</code>.</p>

<p>Other ausdigital services <code class="highlighter-rouge">ausdigital-tap</code>, <code class="highlighter-rouge">ausdigital-tapgw</code>, <code class="highlighter-rouge">ausdigital-nry</code> depend on the DCP service.</p>

<h2 id="licence">Licence</h2>

<p>Copyright (c) 2017 the Editor and Contributors. All rights reserved.</p>

<p>This Specification is free software; you can redistribute it and/or modify it under the
terms of the GNU General Public License as published by the Free Software Foundation;
either version 3 of the License, or (at your option) any later version.</p>

<p>This Specification is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE. See the GNU General Public License for more details.</p>

<p>You should have received a copy of the GNU General Public License along with this program;
if not, see <a href="http://www.gnu.org/licenses">http://www.gnu.org/licenses</a>.</p>

<h2 id="change-process">Change Process</h2>

<p>This document is governed by the <a href="http://rfc.unprotocols.org/spec:2/COSS/">2/COSS</a> (COSS).</p>

<h2 id="language">Language</h2>

<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
“RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in
RFC 2119.</p>

<h2 id="application-programming-interface">Application Programming Interface</h2>

<p>Implementations MUST provide a compliant REST Application Programming Interface.</p>

<p>A draft <a href="http://ausdigital.org/specs/ausdigital-dcp/2.0/api">REST interface v2.0</a> is available for comment.</p>

<h2 id="protocol">Protocol</h2>

<p>For open B2B standards to be adopted, users must have confidence in the integrity:</p>

<ul>
  <li>confidence in business identity.</li>
  <li>common business semantics.</li>
  <li>dynamic service discovery.</li>
</ul>

<p>This framework operates on the basis that the issuer of a business identifier is best positioned to verify the identity of anyone attempting to authorise an update to the metadata registry. That is why for example we are proposing the <code class="highlighter-rouge">ausdigital-dcl/2</code> for the Australian Business Number (ABN) should be operated by the Australian Business Register (ABR).</p>

<p>The Digital Capability Publisher is functionally equivalent to a REST version of the European OASIS standard “Service Metadata Publisher”. Users are expected to have used the <code class="highlighter-rouge">ausdigital-dcl/2</code> to discover the appropriate DCP service for a particular business. They then interact with the DCP using the REST protocol <a href="http://ausdigital.org/specs/ausdigital-dcp/2.0/api">documented here</a> to access a collection of ServiceMetadata entries for the business.</p>

<p>The sample below shows a service metadata record example for a business with ABN 99999999529 that supports both standard invoice and RCTI processes. Fields will be explained in this document later.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"ProcessList"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nt">"ProcessIdentifier"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"scheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ausdigital.org"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill-invoice-v1"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"ServiceEndpointList"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
          </span><span class="nt">"ServiceActivationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-13"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"Certificate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TlRMTVNTUAABAAAAt7IY4gk...."</span><span class="p">,</span><span class="w">
          </span><span class="nt">"EndpointURI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://tap-gw.testpoint.io/api/endpoints/af892e86-9580-484f-ae7e-c4bd42c98eb7/message/"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"transportProfile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tap-v2.ausdigital.org"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"ServiceExpirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-17"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"RequireBusinessLevelSignature"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"TechnicalInformationUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://ausdigital.org/specs/ausdigital-bill/1.0/"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"MinimumAuthenticationLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"ServiceDescription"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAP-GW Service Endpoint for AusDigital BILL Tax Invoice documents."</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"ProcessIdentifier"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"scheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ausdigital.org"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill-rcti-v1"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"ServiceEndpointList"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
          </span><span class="nt">"ServiceActivationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-13"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"Certificate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TlRMTVNTUAABAAAAt7IY4gk...."</span><span class="p">,</span><span class="w">
          </span><span class="nt">"EndpointURI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://tap-gw.testpoint.io/api/endpoints/af892e86-9580-484f-ae7e-c4bd42c98eb7/message"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"transportProfile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tap-v2.ausdigital.org"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"ServiceExpirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-17"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"RequireBusinessLevelSignature"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"TechnicalInformationUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://ausdigital.org/specs/ausdigital-bill/1.0/"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"MinimumAuthenticationLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"ServiceDescription"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAP-GW Service Endpoint for AusDigital BILL Invoice RCTI documents."</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"DocumentIdentifier"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"scheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bdx-docid-qns"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bdx-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ParticipantIdentifier"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"scheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:oasis:names:tc:ebcore:partyid-type:iso6523:0151"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99999999529"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="informal-description">Informal description</h2>

<p>Free-text explanation of the objects, used in this specification</p>

<ul>
  <li>business
    <ul>
      <li>has participant identifier field
        <ul>
          <li>if you can provide JWT token then you can update this participant info:
            <ul>
              <li>if JWT contains participant id which is equal to business participant id</li>
              <li>if JWT has been issued by some IDP which DCP trust</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>has ServiceGroups
        <ul>
          <li>with field name (“default”)</li>
          <li>with field extensions (free format object)</li>
          <li>used to logically group the services</li>
        </ul>
      </li>
      <li>has service metadata list
        <ul>
          <li>with relation to ParticipantIdentifier (reference to containing business)</li>
          <li>with relation to ServiceGroup name (‘default’ if nothing was specified on service creation step)</li>
          <li>with field DocumentIdentifier (which document this service is about)</li>
          <li>with proceses list
            <ul>
              <li>made of process object
                <ul>
                  <li>with field ProcessIdentifier: which process is described</li>
                  <li>with field ServiceEndpointList: list of endpoints, which accept business messages</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>with public keys list
        <ul>
          <li>made of PublicKey items
            <ul>
              <li>with field fingerprint</li>
              <li>with field keyid</li>
              <li>with field pubKey</li>
              <li>with field published</li>
              <li>with field revoked</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>with list of linked participant identifiers</li>
    </ul>
  </li>
</ul>

<p>Business is a base entity, containing all business-related objects. Business info is easy discoverable by DCL-DCP requests chain:</p>

<ul>
  <li>do NAPTR record to well-known DCL instance (like dcl.testpoint.io) with business participant ID encoded as <code class="highlighter-rouge">B-{md5_of_lowercased_participant_id}.{dcl_hostname}.</code> (example: <code class="highlighter-rouge">b-06cdeef89c79d08e77d8ea9a6c85e172.dcl.testpoint.io.</code>)</li>
  <li>get DCP instance hostname (for example. dcp.testpoint.io)</li>
  <li>query DCP instance using given url: <code class="highlighter-rouge">https://{dcp_hostname}/{participant_id}</code></li>
  <li>if sender need endpoint to send his message:
    <ul>
      <li>read and iterate service metadata list of service groups list</li>
      <li>find desired document workflow information</li>
      <li>get remote endpoint which accepts the desired document in the given workflow</li>
      <li>send your document to remote endpoint</li>
    </ul>
  </li>
  <li>if sender need the public key to encrypt some document for the receiver:
    <ul>
      <li>iterate current public keys</li>
      <li>select one which is fine (fresh and not revoked in next 5 minutes)</li>
    </ul>
  </li>
</ul>

<p>So, while having recipient participant ID, message body and DCL installation hostname (which is well-known) anyone can effectively send this message to this participant ID without any extra knowledge (specific endpoints, client software, etc) assuming that any protocol is implemented.</p>

<h2 id="formal-rest-api-description">Formal REST API description</h2>

<p>DCP MAY deny processing of participant identifier if it starts not with <code class="highlighter-rouge">urn:oasis:names:tc:ebcore:partyid-type:</code> with 404 error</p>

<p>DCP MUST support json data format</p>

<p>DCP MAY support legacy OASIS xml data format (PEPPOL)</p>

<p>DCP MAY support any other data format</p>

<p>DCP MUST respect <code class="highlighter-rouge">Accept</code> HTTP header</p>

<p>Any valid DCP implementation (installation) MUST provide next endpoints:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>GET service group info at least for 'default' group (all service metadatas)
GET service metadata
GET business keys list
GET business key by fingerprint/keyid
GET business linked participant ids ("also known as")
</code></pre>
</div>

<p>DCP internally MAY use any trusted data source (for example, local database, populated by valid users, or linked government data directory)</p>

<p>DCP SHOULD NOT require any auth for GET (readonly) endpoints</p>

<p>But it’s not very helpful while businesses can’t execute these actions:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>PUT service metadata
DELETE service metadata
POST business public key
PATCH business public key (update revocation date)
</code></pre>
</div>

<p>so DCP SHOULD allow business managers to update public data</p>

<p>DCP MUST ensure that user have write permission for this business before doing any changes</p>

<p>DCP SHOULD accept JWT token from trusted idp as auth source</p>

<p>DCP MAY use any additional auth mechanism convenient for its users</p>

<p>DCP MAY offer additional endpoints while they don’t collide with standard ones</p>

<h3 id="endpoints-description">Endpoints description</h3>

<p>Checkpoints for ANY endpoint:</p>

<ul>
  <li>XML version MUST be OASIS-compliant</li>
  <li>JSON and XML version MUST provide the same core data with optional extra data</li>
  <li>DCP publishing services SHOULD NOT produce extra metadata that contain extensions necessary for a Client to understand in order to make use of this metadata (private forks of that specification may define whatever they consider useful)</li>
</ul>

<p><strong>GET <code class="highlighter-rouge">/{participant_id}</code></strong></p>
<ul>
  <li>MUST contain participant ID</li>
  <li>MUST contain list of document types (service metadatas links)</li>
  <li>MUST NOT contain any data from linked participant identifiers (untill it’s submitted directly to this one)</li>
  <li>service group MAY have additional json fields provided, implementations SHOULD ignore unknown fields</li>
  <li>response MUST include <code class="highlighter-rouge">ServiceMetadataReferenceCollection</code> element with the list of service metadatas for given participant ID</li>
</ul>

<p><strong>GET <code class="highlighter-rouge">/{participant_id}/service/{document_id}</code></strong></p>
<ul>
  <li>Return service metadata for given <code class="highlighter-rouge">document_id</code> and <code class="highlighter-rouge">participant_id</code></li>
  <li>service metadata MAY have additional json fields provided, implementations SHOULD ignore unknown fields</li>
  <li>response MUST include <code class="highlighter-rouge">ProcessList</code> element</li>
  <li>OASIS response MUST be compatible with <a href="http://docs.oasis-open.org/bdxr/bdx-smp/v1.0/cos01/bdx-smp-v1.0-cos01.html#_Toc458092041">OASIS PEPPOL specification</a></li>
</ul>

<p><strong>GET <code class="highlighter-rouge">/{participant_id}/keys/</code></strong></p>
<ul>
  <li>Return list of published public keys for this participant</li>
  <li>MUST be a list of PublicKey objects (TODO: put that schema here, describe fields <code class="highlighter-rouge">fingerprint</code>, <code class="highlighter-rouge">keyid</code>, <code class="highlighter-rouge">published</code>, <code class="highlighter-rouge">pubKey</code>, <code class="highlighter-rouge">revoked</code>)</li>
  <li>MAY offer additioinal filtering parameters</li>
</ul>

<p><strong>GET <code class="highlighter-rouge">/{participant_id}/keys/{id}</code></strong></p>
<ul>
  <li>Return specific public key for given business</li>
  <li><code class="highlighter-rouge">id</code> parameter MUST be a fingerprint or keyid of given key</li>
  <li>MUST return a valid PublicKey object</li>
  <li>MUST return 404 if key doesn’t exists</li>
  <li>MAY offer additioinal filtering parameters</li>
  <li>MUST return information of key publication date and revocation date if applicable</li>
</ul>

<p><strong>PUT <code class="highlighter-rouge">/{participant_id}/service/{document_id}</code></strong></p>
<ul>
  <li>Update and return updated service metadata</li>
  <li>MUST completely replace old service metadata</li>
  <li>MUST support auth and return 4xx error if auth is invalid</li>
  <li>MUST check user permission to make update operation</li>
  <li>response MUST contain updated service metadata in the same format as GET returns</li>
</ul>

<p><strong>DELETE <code class="highlighter-rouge">/{participant_id}/service/{document_id}</code></strong></p>
<ul>
  <li>MUST do something so GET <code class="highlighter-rouge">/{participant_id}/service/{document_id}</code> starts to return 404</li>
</ul>

<p><strong>GET <code class="highlighter-rouge">/{participant_id}/aka</code></strong></p>
<ul>
  <li>MUST return full list of participant ids, linked by business owner to this participant identifiers</li>
  <li>links works both ways</li>
  <li>if user linked PID1 to PID2 and PID2 to PID3 then PID1 linked to PID3 as well.</li>
  <li>implementations MAY include source participant ID (provided in URL) in linked list</li>
</ul>

<p><strong>POST <code class="highlighter-rouge">/{participant_id}/aka</code></strong></p>
<ul>
  <li>MUST accept body parameter <code class="highlighter-rouge">participantId</code> which is equal to participant ID which business owner wants to link</li>
  <li>DCP MUST check auth and ensure that both participant id (base and linked) are manageable by this user</li>
  <li>MUST silently replace old link by new one if link already exists</li>
  <li>link MUST work both directions (if <code class="highlighter-rouge">/{pid1}/aka</code> contains pid2 then <code class="highlighter-rouge">/{pid2}/aka</code> contains pid1)</li>
  <li>any 3rd participant id, linked to first or second, must receve link to both participant IDs; both participant ID must receive link to any 3rd party participant id, linked to another one.</li>
</ul>

<p><strong>DELETE <code class="highlighter-rouge">/{participant_id}/aka/{linked_participant_id}</code></strong></p>
<ul>
  <li>Is used to remove link between these participant IDs</li>
  <li>DCP MUST check auth and ensure that both participant ids (first and second) are owned by this user</li>
  <li>DCP MUST remove the link between first and second participant id</li>
</ul>

<p>If business has 2 participant identifiers linked then services (documents) from ID1 MUST NOT appear in output for ID2, and vise versa. Business MAY do 2 PUT requests to both participant ID have the same service metadatas, or use implementation-specific convenience endpoints for that.</p>

<h2 id="examples">Examples</h2>

<h3 id="response-formats">Response formats</h3>

<p><strong>GET /urn:oasis:names:tc:ebcore:partyid-type:iso6523:0151::99999999999</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>Accept: application/json

{
  "ServiceMetadataReferenceCollection": [
    "sap::invoice"
  ],
  "Name": "default",
  "Extension": {},
  "ParticipantIdentifier": {
    "scheme": "urn:oasis:names:tc:ebcore:partyid-type:iso6523:0151",
    "value": "99999999999"
  }
}
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>Accept: application/xml

&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;ServiceGroup xmlns="http://busdox.org/serviceMetadata/publishing/1.0/" xmlns:ids="http://busdox.org/transport/identifiers/1.0/"&gt;
  &lt;ids:ParticipantIdentifier scheme="urn:oasis:names:tc:ebcore:partyid-type:iso6523:0151"&gt;99999999999&lt;/ids:ParticipantIdentifier&gt;
  &lt;ServiceMetadataReferenceCollection&gt;
    &lt;ServiceMetadataReference href="https://example.org/urn:oasis:names:tc:ebcore:partyid-type:iso6523:0151::99999999999/service/sap::invoice"/&gt;
  &lt;/ServiceMetadataReferenceCollection&gt;
  &lt;Extension/&gt;
&lt;/ServiceGroup&gt;
</code></pre>
</div>

<p><strong>GET /urn:oasis:names:tc:ebcore:partyid-type:iso6523:0151::99999999999/service/dbc::invoices</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>Accept: application/json

{
  "ProcessList": [
    {
      "ProcessIdentifier": {
        "scheme": "gln-deliver-goods",
        "value": "generic"
      },
      "ServiceEndpointList": [
        {
          "EndpointURI": "https://accesspoint.com/as4service/simplified/invoice-2-type/",
          "transportProfile": "dbc-as4",
          "RequireBusinessLevelSignature": "false",
          "TechnicalInformationUrl": "http://www.acesspoint.com/as4info",
          "MinimumAuthenticationLevel": "2",
          "ServiceDescription": "as4 message service for invoice 2"
        }
      ]
    }
  ],
  "DocumentIdentifier": {
    "scheme": "dbc",
    "value": "invoices"
  },
  "id": "dbc::invoices",
  "ParticipantIdentifier": {
    "scheme": "urn:oasis:names:tc:ebcore:partyid-type:iso6523:0151",
    "value": "99999999999"
  }
}
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>Accept: application/xml

&lt;SignedServiceMetadata xmlns="http://busdox.org/serviceMetadata/publishing/1.0/" xmlns:ids="http://busdox.org/transport/identifiers/1.0/"&gt;
  &lt;ServiceMetadata xmlns="http://busdox.org/serviceMetadata/publishing/1.0/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"&gt;
    &lt;ServiceInformation&gt;
      &lt;ids:ParticipantIdentifier scheme="urn:oasis:names:tc:ebcore:partyid-type:iso6523:0151"&gt;99999999999&lt;/ids:ParticipantIdentifier&gt;
      &lt;ids:DocumentIdentifier scheme="dbc"&gt;invoices&lt;/ids:DocumentIdentifier&gt;
      &lt;ProcessList&gt;
        &lt;Process&gt;
          &lt;ids:ProcessIdentifier scheme="gln-deliver-goods"&gt;generic&lt;/ids:ProcessIdentifier&gt;
          &lt;ServiceEndpointList&gt;
            &lt;Endpoint transportProfile="dbc-as4"&gt;
              &lt;EndpointURI&gt;https://accesspoint.com/as4service/simplified/invoice-2-type/&lt;/EndpointURI&gt;
              &lt;transportProfile&gt;dbc-as4&lt;/transportProfile&gt;
              &lt;RequireBusinessLevelSignature&gt;false&lt;/RequireBusinessLevelSignature&gt;
              &lt;TechnicalInformationUrl&gt;http://www.acesspoint.com/as4info&lt;/TechnicalInformationUrl&gt;
              &lt;MinimumAuthenticationLevel&gt;2&lt;/MinimumAuthenticationLevel&gt;
              &lt;ServiceDescription&gt;as4 message service for invoice 2&lt;/ServiceDescription&gt;
            &lt;/Endpoint&gt;
          &lt;/ServiceEndpointList&gt;
        &lt;/Process&gt;
      &lt;/ProcessList&gt;
    &lt;/ServiceInformation&gt;
  &lt;/ServiceMetadata&gt;
  &lt;Signature xmlns="http://www.w3.org/2000/09/xmldsig#"/&gt;
&lt;/SignedServiceMetadata&gt;
</code></pre>
</div>

<h3 id="participant-id-linking">Participant ID linking</h3>

<p>Before:</p>

<ul>
  <li>pid1 linked to pid2 (and vice versa)</li>
  <li>pid1 linked participant IDs: <code class="highlighter-rouge">[pid1, pid2]</code></li>
  <li>pid2 linked participant IDs: <code class="highlighter-rouge">[pid1, pid2]</code></li>
  <li>pid_new linked participant IDs: <code class="highlighter-rouge">[pid_new]</code> or <code class="highlighter-rouge">[]</code></li>
  <li>user adds pid_new to pid1 links: <code class="highlighter-rouge">POST /{pid1}/aka</code> with <code class="highlighter-rouge"><span class="p">{</span><span class="nt">"participantId"</span><span class="p">:</span><span class="w"> </span><span class="err">pid_new</span><span class="p">}</span></code> payload</li>
</ul>

<p>After:</p>

<ul>
  <li>pid1 linked to pid2 and to pid_new (and vice versa)</li>
  <li>pid1 linked participant IDs: <code class="highlighter-rouge">[pid1, pid2, pid_new]</code></li>
  <li>pid2 linked participant IDs: <code class="highlighter-rouge">[pid1, pid2, pid_new]</code></li>
  <li>pid_new linked participant IDs: <code class="highlighter-rouge">[pid1, pid2, pid_new]</code></li>
</ul>

<p>Please note no <code class="highlighter-rouge">POST /{pid2}/aka</code> was submitted, but pid2 still receives link to pid_new because pid1 was linked to pid2.</p>

<h1 id="related-material">Related Material</h1>

<ul>
  <li>ADBC DCP Implementation Guide (v1.0, available <a href="https://github.com/ausdigital/ausdigital-dcp/blob/master/docs/1.0/Digital_Capability_Publisher_Implementation_Guide_v1.0.pdf">here</a>), which provides background to the <a href="http://ausdigital.org">AusDigital</a> community process.</li>
  <li><a href="https://github.com/ausdigital/ausdigital-dcp/issues/">GitHub issues</a> for collaborating on the development of the DCP.</li>
  <li>A reference <a href="https://dcp.testpoint.io/">DCP service</a> (for testing and development purposes).</li>
  <li>Free, Open-Source Software <a href="https://github.com/test-point/testpoint-dcp">DCP implementation</a>.</li>
  <li>An automated <a href="https://github.com/test-point/testpoint-dcp">DCP test suite</a>.</li>
</ul>

        </div>
    </div>
</div>
<footer class="footer">
    <a href="/" class="footer-logo"><img src="/images/logo.png" alt="AusDigital"><span>AusDigital.org</span></a>
    <ul class="footer-menu">
        <li><a href="http://ausdigital.org/about">About AusDigital</a></li>
        <li><a href="https://github.com/ausdigital" target="_blank">Github</a></li>
        <li><a href="http://eepurl.com/ctZ6hf" target="_blank">Newsletter</a></li>
        <li><a href="http://chat.ausdigital.org/" target="_blank">Join</a> <a href="https://ausdigital.slack.com/messages/general/" target="_blank">team</a></li>
    </ul>
    <div class="footer-credits">
        This page was generated by GitHub Pages.
        Comments, issues and suggestions are welcome in the <a href="https://github.com/ausdigital/ausdigital.github.io/issues/new">ticket system</a>.
        Pull requests welcome in the <a href="https://github.com/ausdigital/ausdigital.github.io/">site repository</a>.
    </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-79579364-2', 'auto');
  ga('send', 'pageview');

</script>

<script src="/js/anchor.min.js"></script>
<script>
    anchors.add('h1, h2, h3, h4, h5');
    anchors.remove('.no-anchor, .page-content > h1:first-child');
</script>
</body>
</html>