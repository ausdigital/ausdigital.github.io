<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>AusDigtial Transaction Access Point Gateway (TAP-GW) 1.0 Specification - AusDigital Standards by ausdigital</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/style.css">

    <link rel="apple-touch-icon" sizes="57x57" href="/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/images/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
</head>

<body>

<header class="header">
    <div class="header-line">
        <div class="wrapper">
            <div id="mobile-menu-wrapper" class="mobile-menu">
                <button id="hamburger-menu" class="hamburger-menu">
                    <span>toggle menu</span>
                </button>
                <div id="mobile-menu" style="display: none;">
                    
                    <ul class="sidebar-menu">
    
    <li class="menu-title">Benefits</li>
    <li><a  href="/business-case/">A Business Case</a></li>
    <li class="menu-title">Technical Specs</li>
    <li><a  href="/ausdigital-idp/">Identity Provider (IDP)</a></li>
    <li><a  href="/ausdigital-dcl/">Capability Locator (DCL)</a></li>
    <li><a  href="/ausdigital-dcp/">Capability Publisher (DCP)</a></li>
    <li><a  href="/ausdigital-tap/">Access Point (TAP)</a></li>
    <li><a class="active" href="/ausdigital-tap-gw/">TAP Gateway (TAP-GW)</a></li>
    <li><a  href="/ausdigital-nry/">Notary (NRY)</a></li>
    <li><a  href="/ausdigital-syn/">UBL Syntax (SYN)</a></li>
    <li class="menu-title">Semantic Specs</li>
    <li><a  href="/ausdigital-code/">Code Lists Mgmt (CODE)</a></li>
    <li><a  href="/ausdigital-bill/">Billing Process (BILL)</a></li>
    <li><a  href="/ausdigital-po/">Purchase Orders (PO)</a></li>
    <li><a  href="/ausdigital-ship/">Fulfillment (SHIP)</a></li>
    <li class="menu-title">Governance</li>
    <li><a  href="/governance-model/">Governance Model</a></li>
    <li class="menu-title">Community</li>
    <li><a href="http://eepurl.com/ctZ6hf" target="_blank">Newsletter (subscribe)</a></li>
    <li><a href="http://chat.ausdigital.org" target="_blank">Chat (join team)</a></li>
    <li><a href="https://github.com/ausdigital/" target="_blank">GitHub</a></li>
</ul>
                </div>
            </div>
            <a href="/" class="logo"><img src="/images/logo.png" alt="AusDigital"><span>AusDigital.org</span></a>
            <div class="header-search">
                <script>
                    (function() {
                        var cx = '017892665596304004128:tj19kxwel_m';
                        var gcse = document.createElement('script');
                        gcse.type = 'text/javascript';
                        gcse.async = true;
                        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                        var s = document.getElementsByTagName('script')[0];
                        s.parentNode.insertBefore(gcse, s);
                    })();
                </script>
                <gcse:search></gcse:search>
            </div>
            
        </div>
    </div>
    <div class="header-content">
        <div class="wrapper">
            <img src="/images/logo.png" alt="AusDigital">
            <div class="header-text-box">
                <div class="header-name">AusDigital Standards</div>
                <div class="header-tagline">Business to Business data exchange open standards community </div>
            </div>
        </div>
    </div>
</header>
<script type="text/javascript">
    document.getElementById('hamburger-menu').onclick = function() {
        var nf = document.getElementById('mobile-menu');

        // Show and hide menu items when toggle is clicked
        if(nf.style.display==='none') {
            nf.style.display = 'block';
        }
        else {
            nf.style.display = 'none';
        }
    };

    window.addEventListener('click', function(e){
        if (!document.getElementById('mobile-menu-wrapper').contains(e.target)){
            document.getElementById('mobile-menu').style.display= 'none';
        }
    });
</script>

<div class="main-wrapper">
    <div class="main-content">
        <div class="page-sidebar">
            <ul class="sidebar-menu">
    
    <li class="menu-title">Benefits</li>
    <li><a  href="/business-case/">A Business Case</a></li>
    <li class="menu-title">Technical Specs</li>
    <li><a  href="/ausdigital-idp/">Identity Provider (IDP)</a></li>
    <li><a  href="/ausdigital-dcl/">Capability Locator (DCL)</a></li>
    <li><a  href="/ausdigital-dcp/">Capability Publisher (DCP)</a></li>
    <li><a  href="/ausdigital-tap/">Access Point (TAP)</a></li>
    <li><a class="active" href="/ausdigital-tap-gw/">TAP Gateway (TAP-GW)</a></li>
    <li><a  href="/ausdigital-nry/">Notary (NRY)</a></li>
    <li><a  href="/ausdigital-syn/">UBL Syntax (SYN)</a></li>
    <li class="menu-title">Semantic Specs</li>
    <li><a  href="/ausdigital-code/">Code Lists Mgmt (CODE)</a></li>
    <li><a  href="/ausdigital-bill/">Billing Process (BILL)</a></li>
    <li><a  href="/ausdigital-po/">Purchase Orders (PO)</a></li>
    <li><a  href="/ausdigital-ship/">Fulfillment (SHIP)</a></li>
    <li class="menu-title">Governance</li>
    <li><a  href="/governance-model/">Governance Model</a></li>
    <li class="menu-title">Community</li>
    <li><a href="http://eepurl.com/ctZ6hf" target="_blank">Newsletter (subscribe)</a></li>
    <li><a href="http://chat.ausdigital.org" target="_blank">Chat (join team)</a></li>
    <li><a href="https://github.com/ausdigital/" target="_blank">GitHub</a></li>
</ul>
        </div>
        <div class="page-content docs-content">
            <div class="spec-header">
                
                <ul>
                    <li>Spec ID: <p>ausdigital-tap-gw/1</p>
</li>
                    <li><p><img src="http://rfc.unprotocols.org/spec:2/COSS/raw.svg" alt="raw" /></p>
</li>
                    <li>Editor: <p><a href="mailto:christopher.d.gough@gmail.com">Chris Gough</a></p>
</li>
                    <li>Contributors: <p><a href="mailto:steven.capell@gosource.com.au">Steven Capell</a></p>
</li>
                </ul>
            </div>
            <div class="specs-toc">
    <!--<div class="specs-toc-title">Table of contents</div>-->
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#introduction">Introduction</a></li>
<li class="toc-entry toc-h2"><a href="#goals">Goals</a></li>
<li class="toc-entry toc-h2"><a href="#status">Status</a></li>
<li class="toc-entry toc-h2"><a href="#glossary">Glossary</a></li>
<li class="toc-entry toc-h2"><a href="#licence">Licence</a></li>
<li class="toc-entry toc-h2"><a href="#change-process">Change Process</a></li>
<li class="toc-entry toc-h2"><a href="#language">Language</a></li>
<li class="toc-entry toc-h1"><a href="#manage-endpoints">Manage Endpoints</a></li>
<li class="toc-entry toc-h1"><a href="#endpoint-publishing">Endpoint Publishing</a></li>
<li class="toc-entry toc-h2"><a href="#directly-updated-dcp-and-dcl">Directly updated DCP and DCL</a></li>
<li class="toc-entry toc-h2"><a href="#updating-dcp-and-dcl-via-tap-gw">Updating DCP and DCL via TAP-GW</a></li>
<li class="toc-entry toc-h1"><a href="#receive-messages">Receive Messages</a></li>
<li class="toc-entry toc-h1"><a href="#send-messages">Send Messages</a></li>
<li class="toc-entry toc-h1"><a href="#related-material">Related Material</a></li>
</ul>
</div>
            <p>This document describes the access point gateway (TAP-GW), which is an optional
extension to the ADBC access point (TAP). The TAP-GW allows ledger implementers
to use standard interfaces and protocols for communication between
trusted/secure ledger systems and public-facing TAP services.</p>

<h1 id="introduction">Introduction</h1>

<p>There are various reasons why a business system architect may want a structural
separation between their trusted components (e.g. ledger service, ERP system,
etc) and their externally facing components, such as a TAP Gateway. These
include performance, reliability and security objectives, as well as a desire to
focus on features that differentiate their system while outsourcing generic
functionality to services with low-cost utility characteristics. The TAPGW
sub-protocol is designed to ensure Gateway services are generic and
interchangeable commodities.</p>

<p>A TAP Gateway service is an availability mediator (allowing trusted business
system components to have intermittent connectivity, and/or to sit behind a
firewall). It is however more than a simple asynchronous proxy
(store-and-forward service); additionally, it performs functions such as message
validation, logging, access control, and protocol callbacks (including to Notary
services).</p>

<p>Cryptography is used to prevent TAP Gateways from being able to inspect or
manipulate the content of business messages. A TAP Gateway is not custodian of
any business key material, it is only trusted to reliably send and receive
messages. Message signing and encryption/decryption is performed by systems
behind TAPs. The TAP is unable to verify signatures that have been encrypted,
but can verify signatures that are not encrypted.</p>

<p>Notarisation to the blockchain makes it possible for the business system to
audit the reliability of any TAP Gateway that it uses.</p>

<p>This specification aims to support the Australian Digital Business Council
<a href="http://ausdigital.org">eInvoicing initiative</a>, as an extension of the
<a href="https://github.com/ausdigital/ausdigital-tap">https://github.com/ausdigital/ausdigital-tap</a>.
It is under active development at
<a href="https://github.com/ausdigital/ausdigital-tap-gw">https://github.com/ausdigital/ausdigital-tap-gw</a>.</p>

<h2 id="goals">Goals</h2>

<ul>
  <li>Standard interface for administering an ausdigital-tap service, so that
TAP services can be interchangeable commodities (prevent vendor lock-in).</li>
  <li>Clearly delineate the boundary between private trusted systems and commodity
message processing infrastructure.</li>
  <li>Manage a potentially large number of TAP endpoints, including bespoke
metadata that supports custom search features.</li>
  <li>Provide safe and convenient methods for processing messages.</li>
  <li>Abstract <code class="highlighter-rouge">ausdigital-ney</code> away from the message handling protocol, so that
they support auditing and verification requirements without adding complexity
to message handling.</li>
  <li>Abstract <code class="highlighter-rouge">ausdigital-dcl</code>, <code class="highlighter-rouge">ausdigital-dcp</code> and <code class="highlighter-rouge">ausdigital-idp</code> behind safe
and convenient API methods for publishing endpoints.</li>
</ul>

<h2 id="status">Status</h2>

<p>This spec is a requirement for consultation.</p>

<p>This spec is optional: If a trusted business system is persistently connected to
the internet and natively supports the TAP protocol, then it has no need for a
TAP-GW interface, either as a client or server. Gateways are not necessary in
the TAP protocol, the TAPGW sub-protocol is described as an optional extension
to the TAP protocol.</p>

<h2 id="glossary">Glossary</h2>

<table>
  <thead>
    <tr>
      <th>phrase</th>
      <th>Definition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ausdigital-tapgw/1</td>
      <td>This document</td>
    </tr>
    <tr>
      <td>ausdigital-tap/2</td>
      <td>Version 2 of the <a href="http://ausdigital.org">AusDigtial</a> <a href="http://ausdigital.org/specs/ausdigital-tap/2.0/">TAP</a> specification</td>
    </tr>
    <tr>
      <td>ausdigital-dcl/1</td>
      <td>Version 1 of the <a href="http://ausdigital.org">AusDigtial</a> <a href="http://ausdigital.org/specs/ausdigital-dcl/1.0">DCL</a> specification</td>
    </tr>
    <tr>
      <td>ausdigital-dcp/1</td>
      <td>Version 1 of the <a href="http://ausdigital.org">AusDigtial</a> <a href="http://ausdigital.org/specs/ausdigital-dcp/1.0">DCP</a> specification</td>
    </tr>
    <tr>
      <td>ausdigital-nry/1</td>
      <td>Version 1 of the <a href="http://ausdigital.org">AusDigtial</a> <a href="http://ausdigital.org/specs/ausdigital-nry/1.0/">NRY</a> specification</td>
    </tr>
    <tr>
      <td>ausdigital-idp/1</td>
      <td>Version 1 of the <a href="http://ausdigital.org">AusDigtial</a> <a href="http://ausdigital.org/specs/ausdigital-idp/1.0/">IDP</a> specification</td>
    </tr>
  </tbody>
</table>

<h2 id="licence">Licence</h2>

<p>Copyright (c) 2016-2017 the Editor and Contributors. All rights reserved.</p>

<p>This Specification is free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation; either version 3 of the License, or (at your option) any
later version.</p>

<p>This Specification is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
details.</p>

<p>You should have received a copy of the GNU General Public License along with
this program; if not, see
<a href="http://www.gnu.org/licenses">http://www.gnu.org/licenses</a>.</p>

<h2 id="change-process">Change Process</h2>

<p>This document is governed by the
<a href="http://rfc.unprotocols.org/spec:2/COSS/">2/COSS</a> (COSS).</p>

<h2 id="language">Language</h2>

<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
“SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be
interpreted as described in RFC 2119.</p>

<h1 id="manage-endpoints">Manage Endpoints</h1>

<p>The <code class="highlighter-rouge">ausdigital-tap</code> specification describes how a multipart/form-data message
is sent to an HTTPS endpoint (TAP_URL) with a POST verb. The TAP-GW sub-protocol
provides methods for creating, configuring and deleting these endpoints.</p>

<p>These endpoints are identified with a URL, comprised of an the TAP-GW provider’s
DNS domain followed by an RFC 4122 Universally Unique Identifier (UUID).</p>

<p>For example:</p>
<ul>
  <li><code class="highlighter-rouge">https://tap.testpoint.io/886313e1-3b8a-5372-9b90-0c9aee199e5d/</code>, or</li>
  <li><code class="highlighter-rouge">https://my-access-point.com/api/tap/Z2o6mR51EME/</code>, or any other URL</li>
</ul>

<p>This endpoint does not directly reveal any information about the message
receiving party, however the <code class="highlighter-rouge">ausdigital-dcp</code> reference to the endpoint will (if
metadata about the endpoint has been published).</p>

<p>Endpoint metadata - arbitrary key/values associated with the endpoints by endpoint owner for their internal needs.</p>

<p>As a TAP-GW user party can:</p>

<ul>
  <li>list own endpoints <code class="highlighter-rouge">GET /endpoints/</code>
    <ul>
      <li>optionally filtered by metadata <code class="highlighter-rouge">GET /endpoints/?{filter}</code></li>
    </ul>
  </li>
  <li>GET endpoint details <code class="highlighter-rouge">GET /endpoints/{uuid}</code></li>
  <li>PUT new endpoint details <code class="highlighter-rouge">PUT {details} /endpoints/{uuid}</code></li>
  <li>(optional) PATCH endpoint details <code class="highlighter-rouge">PATCH {details} /endpoints/{uuid}</code></li>
  <li>create endpoint <code class="highlighter-rouge">POST {details} /endpoints/</code>
    <ul>
      <li>returns endpoint details (id)</li>
    </ul>
  </li>
</ul>

<p>Schema of endpoint details:</p>

<ul>
  <li>does not include uuid for write methods (PUT/PATCH/POST) (that is generated by the TAP-GW)</li>
  <li>includes endpointType (this implies validation rules, allowable value
currently limited to <code class="highlighter-rouge">ausdigital-tap/2</code>)</li>
  <li>includes notary policy (durability, default 1 year)</li>
  <li>includes arbitrary metadata <code class="highlighter-rouge"><span class="p">{</span><span class="err">'k1':'v1',</span><span class="w"> </span><span class="err">'k2':'v2',</span><span class="w"> </span><span class="err">...</span><span class="p">}</span></code></li>
  <li>‘status’ metadata keyword is forbidden (used internally by the TAP-GW,
see bellow)</li>
</ul>

<p>Note:</p>

<ul>
  <li>TAP-GW is a TAP protocol extension, which means that TAP-GW installation may be used as TAP (and basically emulates multiple TAP installations at same domain)</li>
  <li>base pathes are supported: specific installation may prefix all endpoints from this specification by some url
    <ul>
      <li>for example, given we have installation <code class="highlighter-rouge">https://tap-gw.testpoint.io/</code> and base path is <code class="highlighter-rouge">/api/v1/</code>, endpoints list url will be available at <code class="highlighter-rouge">https://tap-gw.testpoint.io/api/v1/endpoints/</code></li>
    </ul>
  </li>
  <li>TAP-GW SHOULD support JWT user authentication</li>
  <li>TAP-GW MAY support any other user auth method</li>
</ul>

<p>TAP-GW customers can create an arbitrary number of endpoints, however these
endpoints are “anonymous” until they are mapped to the integration surface of an identified business (via endpoint publishing mechanism). Endpoints may be created on behalf of customer, for example by customer’s ledger software</p>

<h1 id="endpoint-publishing">Endpoint Publishing</h1>

<p>When endpoints are first created they are anonymous (there is no public information associated with them). Anonymous endpoints can receive messages, but they are a “dark channel” (not discoverable) until they have metadata published
about them in a DCP (see <code class="highlighter-rouge">ausdigital-dcp</code>), and this DCP has been referenced from some DCL (see <code class="highlighter-rouge">ausdigital-dcl</code>).</p>

<p>There are two ways to publish metadata about an endpoint in a DCP:</p>

<ul>
  <li>Directly, via the DCP or DCL interface</li>
  <li>Indirectly, via TAP-GW convenience methods.</li>
</ul>

<h2 id="directly-updated-dcp-and-dcl">Directly updated DCP and DCL</h2>

<p>Publicly associating endpoints with a service interface for a business
identity, directly in the DCP requires an appropriate authorisation token from
an IDP (see <code class="highlighter-rouge">ausdigital-idp</code> for details). Similarly, associating a DCP with a
business identity requires an appropriate authorisation token from an IDP (see
<code class="highlighter-rouge">ausdigital-dcl</code> for details).</p>

<p>If the TAP-GW interface is used to create an endpoint, and the DCL and DCP are
directly updated to reference this endpoint, no further action is required (the
endpoint is published)</p>

<h2 id="updating-dcp-and-dcl-via-tap-gw">Updating DCP and DCL via TAP-GW</h2>

<p>In addition to directly updating the DCL and DCP, it is also possible to use the
TAP-GW to update the DCL and DCP indirectly, via a convenience interface that
abstracts <code class="highlighter-rouge">ausdigital-dcl</code> and <code class="highlighter-rouge">ausdigital-dcp</code> away from the integrated system.</p>

<p>While the TAP-GW interface for updating DCL and DCP is simple, it still requires
an appropriate authorisation token per <code class="highlighter-rouge">ausdigital-idp</code>. There is more than one
way to accomplish this:</p>

<ul>
  <li>The TAP-GW may be a client of an IDP, which is trusted to an appropriate
level of assurance by the resource (DCP or DCL). If the business identity
provides authorisation to the TAP-GW, the IDP will issue a token to the
TAP-GW authorising it to update that business metadata associated with that
business identity in the resource. This requires the business to authenticate themselves directly to the IDP, and then provide authorisation directly to
the IDP.</li>
  <li>The user of the TAP-GW may operate a private (or 3rd party IDP) which is
trusted by the resource (DCP or DCL) with an appropriate level of assurance,
including certification for known customer relationship authorisations. If
the TAP-GW is a Relying Party of this IDP, then the user may use the known
customer interface of the IDP to issue tokens to the TAP-GW, that the TAP-GW
can then use to update the resource.</li>
  <li>The TAP-GW may operate a private IDP on behalf of the user, which is trusted
by the resource (DCP or DCL) at an appropriate level of assurance. This would
require the TAP-GW to prove to the satisfaction of the resource that their
user has ‘known customer relationship’ with their clients (the TAP-GW’s
customer’s customer), and that the TAP-GW is authorised to operate the
private IDP on behalf of their client. In this situation, the TAP-GW could be
an OIDC relying party of the private, trusted IDP and use it to issue tokens
with business identity claims associated with the TAP-GW’s customer’s
customer, to the TAP-GW, on behalf of the TAP-GW’s customer.</li>
</ul>

<p>Assuming the TAP-GW has access to appropriate authorisation tokens, the simplest
way to publish metadata about the endpoint in the DCP (or DCL) is to use the
convenience methods in the TAP-GW. This provides a simplified interface for
associating an endpoint with a business identity, service group and purpose.IDP.</p>

<p>TODO: document <code class="highlighter-rouge">PUT /endpoints/{uuid}/business</code>.
Schema:</p>

<ul>
  <li>JWT required</li>
  <li>business identifier URN?</li>
  <li>which ServiceGroup?</li>
  <li>Which endpoint type?</li>
  <li>requires an appropriate JWT for the business and DCP (update business
metadata scope)</li>
</ul>

<p>Notes/Rules:</p>

<ul>
  <li>The TAP-GW uses <code class="highlighter-rouge">ausdigital-dcl</code> to identify which DCP to post the change to.</li>
  <li>the JWT must come from an <code class="highlighter-rouge">ausdigital-idp</code> that the DCP is a client of, in
other words the DCP is the RP (not the TAP_GW)</li>
  <li>The JWT must contain a claim matching the URN</li>
</ul>

<p>Question: Do we (or the DCP) prevent  a business from associating the same
endpoint with multiple businesses, multiple service groups, or multiple endpoint
types? - that’s a question for the DCP spec.</p>

<ul>
  <li>pro: forcing endpoint uniqueness (within a DCP) protects ledger customers
from lock-in.</li>
  <li>con: it’s not our problem, but we wear the cost of the complexity.</li>
  <li>I propose we do force endpoint uniqueness, but we should discuss this a bit
more widely.</li>
</ul>

<p>When a valid <code class="highlighter-rouge">PUT /endpoints/{uuid}/business</code> is received by the TAP-GW, the
TAP-GW will use the JWT to interact with the DCP and configure the endpoint
appropriately (for that message type, in the specified service group, for the
identified URN).</p>

<p>That should probably be asynchronous, so PUTting should return a status URL,
which can be used to check the status of the update (in progress, complete,
failed).</p>

<h1 id="receive-messages">Receive Messages</h1>

<p>This is done on a per-endpoint basis.</p>

<ul>
  <li>get list of new messages with <code class="highlighter-rouge">GET /endpoints/{uuid}/{filter}</code>. This returns
a simple collection of identifiers, datetime received, size in bytes and any other data.</li>
  <li>get individual message content with <code class="highlighter-rouge">GET /messages/{uuid}</code></li>
  <li>view message status (new/read/..) with <code class="highlighter-rouge">GET /messages/{uuid}/metadata</code></li>
  <li>mark message as read with <code class="highlighter-rouge">PATCH {'status':'read'} /messages/{uuid}/metadata</code></li>
  <li>mark message as new/unread with
<code class="highlighter-rouge">PATCH {'status':'new'} /messages/{uuid}/metadata</code></li>
  <li>update message metadata with
<code class="highlighter-rouge">PATCH {'k1':'v3', 'k2':'v5'}</code> <code class="highlighter-rouge">/messages/{uuid}/metadata</code></li>
</ul>

<p>TAP-GW user MAY ignore status update and keep tracking of read/unread messages by it’s own methods.</p>

<h1 id="send-messages">Send Messages</h1>

<p>There is no need to send messages via the TAP-GW, even if the TAP-GW is being
used to receive messages. However, it is possible</p>

<ul>
  <li><code class="highlighter-rouge">POST {base64 encoded message, TAP_URL} /sender</code></li>
  <li>this will return a UUID, subsequently</li>
  <li><code class="highlighter-rouge">GET /sender/{uuid}</code> will return status of the message (still trying, sent,
failed)</li>
</ul>

<p>TODO:</p>

<ul>
  <li>add callback for unsuccessful sends</li>
  <li>is base64 encoding right, or should this be multipart/form-data with new
parts? is that how we include callback(s)?</li>
</ul>

<h1 id="related-material">Related Material</h1>

<ul>
  <li><a href="https://github.com/ausdigital/ausdigital-tap-gw/issues/">GitHub issues</a> for collaborating on the development of the TAP-GW.</li>
  <li>A reference <a href="http://testpoint.io/tap-gw">TAP-GW service</a> (for testing and development purposes).</li>
  <li>Free, Open-Source Software <a href="https://github.com/test-point/testpoint-tap-gw">TAP-GW implementation</a>.</li>
  <li>An automated <a href="https://github.com/test-point/testpoint-tap-gw">TAP-GW test suite</a>.</li>
</ul>

        </div>
    </div>
</div>
<footer class="footer">
    <a href="/" class="footer-logo"><img src="/images/logo.png" alt="AusDigital"><span>AusDigital.org</span></a>
    <ul class="footer-menu">
        <li><a href="http://ausdigital.org/about">About AusDigital</a></li>
        <li><a href="https://github.com/ausdigital" target="_blank">Github</a></li>
        <li><a href="http://eepurl.com/ctZ6hf" target="_blank">Newsletter</a></li>
        <li><a href="http://chat.ausdigital.org/" target="_blank">Join</a> <a href="https://ausdigital.slack.com/messages/general/" target="_blank">team</a></li>
    </ul>
    <div class="footer-credits">
        This page was generated by GitHub Pages.
        Comments, issues and suggestions are welcome in the <a href="https://github.com/ausdigital/ausdigital.github.io/issues/new">ticket system</a>.
        Pull requests welcome in the <a href="https://github.com/ausdigital/ausdigital.github.io/">site repository</a>.
    </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-79579364-2', 'auto');
  ga('send', 'pageview');

</script>

<script src="/js/anchor.min.js"></script>
<script>
    anchors.add('h1, h2, h3, h4, h5');
    anchors.remove('.no-anchor, .page-content > h1:first-child');
</script>
</body>
</html>